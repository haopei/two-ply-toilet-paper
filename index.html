<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Two Ply Toilet Paper</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="style/main.css">
</head>

<body>

<!-- <audio src="https://storage.googleapis.com/two-ply-toilet-tissue/quiet-place-mimms.mp3">
    <p>If you are reading this, it is because your browser does not support the audio element.</p>
</audio> -->

<div class="whole-thing">
    <button id="playButton">Play Music &#9658;</button>

    <div class="tv-wrapper text-center">
        <h1 class="title text-shadow__red">Now In Stock</h1>
        <hr>
        <div class="section section--two-ply text-colour--white text-shadow__black">
          2 Ply White
        </div>

        <div class="section section--toilet-tissue text-colour--creamy-orange text-shadow__black">
            Toilet Tissue
        </div>

        <div class="section section--rnr-international text-colour--white text-shadow__red">
            At R&R International Ltd.
        </div>

        <div class="section section--address text-shadow__black">
            139 Regent & Light Sts. & <br>
            7-9 Lombard St., G/town
        </div>

        <div class="section section--telephone text-shadow__red">
            Tel: 226-1205, 226-4311
        </div>
    </div>

    <div class="text-center">
        <button id="comingUpNext">Coming Up Next...</button>
        <p id="tvGuide" class="hide">
            <button class="tribute__button" id="PlayFamilyMatters">Family Matters</button>
            <button class="tribute__button" id="PlayFullHouse">Full House</button>
            <button class="tribute__button" id="PlayThreesCompany">Three's Company</button>
        </p>
    </div>
</div>

<script>

    var buttonThreesCompany = document.querySelector('#PlayThreesCompany');
    var buttonFamilyMatters = document.querySelector('#PlayFamilyMatters');
    var buttonFullHouse = document.querySelector('#PlayFullHouse');

    var audio = new Audio('https://storage.googleapis.com/two-ply-toilet-tissue/quiet-place-mimms.mp3');

    // hold the state of currently playing song
    var nowPlaying = {
        currentlyPlaying: audio,
        nowShowingText: '',
        currentActiveButton: null
    }

    document.querySelector('#playButton').addEventListener('click', function() {
        var button = this;
        var audioUrl = 'https://storage.googleapis.com/two-ply-toilet-tissue/quiet-place-mimms.mp3'
        var audio = new Audio(audioUrl)
        audio.play().then(function() {
            resetButtonTexts();
            stopPlayingAudio(nowPlaying.currentlyPlaying);
            nowPlaying.currentlyPlaying = audio;
        })
    })

    buttonFamilyMatters.addEventListener('click', function() {
        var thisButton = this;
        thisButton.innerText = "Stay Tuned...";
        var audioUrl = 'https://storage.googleapis.com/two-ply-toilet-tissue/family-matters-song.mp3';
        var audio = new Audio(audioUrl)
        audio.play().then(function() {
            resetButtonTexts();
            thisButton.innerText = "Now Showing: Family Matters";
            thisButton.classList.add('button__currently-playing');
            stopPlayingAudio(nowPlaying.currentlyPlaying);
            nowPlaying.currentlyPlaying = audio;
        })
    })

    buttonFullHouse.addEventListener('click', function() {
        var thisButton = this;
        thisButton.innerText = "Stay Tuned...";
        var audioUrl = 'https://storage.googleapis.com/two-ply-toilet-tissue/Full_House_Season_Eight_Extended_Theme_Song.mp3';
        var audio = new Audio(audioUrl)
        audio.play().then(function() {
            resetButtonTexts();
            thisButton.innerText = "Now Showing: Full House";
            thisButton.classList.add('button__currently-playing');
            stopPlayingAudio(nowPlaying.currentlyPlaying);
            nowPlaying.currentlyPlaying = audio;
        })
    })


    buttonThreesCompany.addEventListener('click', function() {
        var thisButton = this;
        thisButton.innerText = "Stay Tuned...";
        var audioUrl = 'https://storage.googleapis.com/two-ply-toilet-tissue/threes-company-song.mp3';
        var audio = new Audio(audioUrl)
        audio.play().then(function() {
            resetButtonTexts();
            thisButton.innerText = "Now Showing: Three's Company";
            thisButton.classList.add('button__currently-playing');
            stopPlayingAudio(nowPlaying.currentlyPlaying);
            nowPlaying.currentlyPlaying = audio;
        })
    })

    document.querySelector('#comingUpNext').addEventListener('click', function() {
        this.classList.add('hide');
        document.querySelector('#tvGuide').classList.remove('hide');
    })

    function stopPlayingAudio(audio) {
        audio.currentTime = 0;
        audio.pause();
    }

    function resetButtonTexts() {
        // I know... I know...
        buttonFamilyMatters.innerText = 'Family Matters';
        buttonFamilyMatters.classList.remove('button__currently-playing');
        buttonFullHouse.innerText = 'Full House';
        buttonFullHouse.classList.remove('button__currently-playing');
        buttonThreesCompany.innerText = "Three's Company";
        buttonThreesCompany.classList.remove('button__currently-playing');
    }
</script>
</body>

</html>
